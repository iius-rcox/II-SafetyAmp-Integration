# Dead Code Analysis Report

**Generated:** 2026-01-30 (Updated)
**Previous Analysis:** 2026-01-27
**Analysis Method:** Manual static analysis with ripgrep

---

## Summary

| Severity | Count | Description |
|----------|-------|-------------|
| SAFE     | 5     | utils/ modules not imported anywhere |
| CAUTION  | 2     | Operational scripts (keep for debugging) |
| DANGER   | 0     | - |

**Total dead files identified:** 5 Python modules
**Estimated reduction:** ~525 lines of Python code

---

## ðŸŸ¢ SAFE: Completely Unused Modules

These files exist but are never imported by any production or test code.

### 1. `utils/error_manager.py` (~53 lines)

**Status:** DEAD CODE
**Reason:** Never imported anywhere in the codebase

```bash
$ rg -l "error_manager" . --type py
./utils/error_manager.py  # Only the file itself
```

**Contains:**
- `ErrorManager` class with `log_error()`, `get_recent_errors()`, `clear_errors()`, `has_recent_errors()`
- Global `error_manager` instance

**Safe to delete:** YES

---

### 2. `utils/error_notifier.py` (~291 lines)

**Status:** DEAD CODE (superseded by services/event_manager.py)
**Reason:** Functionality was migrated to `services/event_manager.py::_ErrorNotifier` class

```python
# In services/event_manager.py:
class _ErrorNotifier:
    """Internal notifier (migrated from utils.error_notifier)."""
```

**Contains:**
- `ErrorNotifier` class with error logging, notification sending, cleanup
- Global `error_notifier` instance
- Imports `utils/emailer.py`

**Safe to delete:** YES - Replaced by internal class

---

### 3. `utils/notification_manager.py` (~75 lines)

**Status:** DEAD CODE
**Reason:** Never imported anywhere in the codebase

```bash
$ rg -l "notification_manager" . --type py
./utils/notification_manager.py  # Only the file itself
```

**Contains:**
- `NotificationManager` class for sync failure notifications
- Imports from `utils/circuit_breaker.py`

**Safe to delete:** YES

---

### 4. `utils/circuit_breaker.py` (~82 lines)

**Status:** DEAD CODE
**Reason:** Only imported by `utils/notification_manager.py` which is also dead

```bash
$ rg -l "circuit_breaker" . --type py
./utils/notification_manager.py  # Dead code
./utils/circuit_breaker.py       # Self
```

**Contains:**
- `RateLimitError` exception class
- `TemporaryAPIError` exception class
- `sync_with_circuit_breaker()` decorator
- `SmartRateLimiter` class

**Safe to delete:** YES

---

### 5. `utils/emailer.py` (~24 lines)

**Status:** DEAD CODE
**Reason:** Only imported by `utils/error_notifier.py` which is dead code

```bash
$ rg "from utils.emailer" . --type py
services/event_manager.py:  # No-op email body here; integrate with utils.emailer if desired (comment only)
utils/error_notifier.py:from utils.emailer import send_error_email  # Dead code importer
```

**Contains:**
- `send_error_email()` function using SMTP

**Safe to delete:** YES

---

## ðŸŸ¡ CAUTION: Operational Scripts

These are standalone scripts, not modules. Consider keeping for debugging:

| File | Purpose | Recommendation |
|------|---------|----------------|
| `test-connections.py` | Manual connectivity test via /health | KEEP - useful for debugging |
| `test-db-connection.py` | Manual database health check | KEEP - useful for debugging |

---

## âœ… TypeScript Dashboard Analysis

The dashboard (`dashboard/src/`) was analyzed:

- **All components in `components/`**: Used in `App.tsx`
- **All exports in `utils/formatters.ts`**: Used across components
- **All types in `types/dashboard.ts`**: Used by components and hooks

**No unused TypeScript code found.**

---

## Recommended Actions

### Phase 1: Run Baseline Tests

```bash
python3 -m pytest tests/ -v
```

### Phase 2: Delete Dead Files

```bash
rm utils/error_manager.py
rm utils/error_notifier.py
rm utils/notification_manager.py
rm utils/circuit_breaker.py
rm utils/emailer.py
```

### Phase 3: Verify Tests Still Pass

```bash
python3 -m pytest tests/ -v
```

### Phase 4: Commit

```bash
git add -A
git commit -m "refactor: remove dead code in utils/"
```

---

## Deletion Verification Checklist

- [ ] Run `python3 -m pytest tests/ -v` (baseline)
- [ ] Delete files one at a time
- [ ] Verify tests pass after each deletion
- [ ] If tests fail, rollback and investigate

---

## Code Savings Summary

| File | Lines | Can Delete? |
|------|-------|-------------|
| `utils/error_manager.py` | ~53 | YES |
| `utils/error_notifier.py` | ~291 | YES |
| `utils/notification_manager.py` | ~75 | YES |
| `utils/circuit_breaker.py` | ~82 | YES |
| `utils/emailer.py` | ~24 | YES |
| **Total** | **~525** | - |

---

*Report generated by Claude Code refactor-clean analysis*
